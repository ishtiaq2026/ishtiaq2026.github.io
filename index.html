<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reward Hub</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
    }
    header {
      display: flex;
      justify-content: space-around;
      padding: 15px;
      background: #1e1e1e;
      box-shadow: 0 0 5px #000;
    }
    header button {
      background: transparent;
      border: none;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
    .btn {
      background: #4caf50;
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
    }
    input, select {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      border: none;
      background: #333;
      color: white;
    }
  </style>
</head>
<body><header>
  <button onclick="showTab('earn')">üèÜ Earn</button>
  <button onclick="showTab('redeem')">üí≥ Redeem</button>
  <button onclick="showTab('history')">üìú History</button>
  <button onclick="showTab('profile')">üë§ Profile</button>
</header><!-- Earn Section --><section id="earn" class="active">
  <h2>Watch Ads & Earn Points</h2>
  <p>Watched: <span id="watched">0</span></p>
  <p>Points: <span id="points">0</span></p>
  <button class="btn" id="watchAdBtn">‚ñ∂Ô∏è Watch Ad</button>
  <p id="timer">‚úÖ Ready</p>
</section><!-- Redeem Section --><section id="redeem">
  <h2>Redeem Points</h2>
  <p>500 Points = 50‡ß≥ | 1000 Points = 100‡ß≥</p>
  <input type="number" id="redeemPoints" placeholder="Enter points (500 or 1000)" />
  <select id="redeemMethod">
    <option value="Bkash">Bkash</option>
    <option value="Nagad">Nagad</option>
    <option value="Rocket">Rocket</option>
  </select>
  <input type="text" id="redeemNumber" placeholder="Phone Number" />
  <button class="btn" onclick="submitRedeem()">Submit Request</button>
</section><!-- History Section --><section id="history">
  <h2>History</h2>
  <p>Total Ads Watched: <span id="totalWatched">0</span></p>
  <p>Total Redeems: <span id="totalRedeems">0</span></p>
</section><!-- Profile Section --><section id="profile">
  <h2>Your Profile</h2>
  <input type="text" id="telegramUser" placeholder="Telegram Username (without @)" />
  <button class="btn" onclick="saveUsername()">Save</button>
  <p id="savedUser"></p>
</section><!-- Ad Script --><script src="//libtl.com/sdk.js" data-zone="9547713" data-sdk="show_9547713"></script><script>
  let watched = parseInt(localStorage.getItem('watched') || '0');
  let points = parseInt(localStorage.getItem('points') || '0');
  let redeems = parseInt(localStorage.getItem('redeems') || '0');
  let ready = true;

  function updateUI() {
    document.getElementById('watched').textContent = watched;
    document.getElementById('points').textContent = points;
    document.getElementById('totalWatched').textContent = watched;
    document.getElementById('totalRedeems').textContent = redeems;
    document.getElementById('savedUser').textContent = 'Username: ' + (localStorage.getItem('tgUser') || 'Not set');
  }
  updateUI();

  document.getElementById('watchAdBtn').addEventListener('click', () => {
    if (!ready) return;
    if (typeof show_9547713 === 'function') {
      show_9547713().then(() => {
        watched++;
        points += 5;
        localStorage.setItem('watched', watched);
        localStorage.setItem('points', points);
        updateUI();
        startTimer();
      }).catch(() => alert('Ad failed to load'));
    }
  });

  function startTimer() {
    let sec = 10;
    ready = false;
    document.getElementById('watchAdBtn').disabled = true;
    document.getElementById('timer').textContent = `Wait ${sec}s`;
    let interval = setInterval(() => {
      sec--;
      document.getElementById('timer').textContent = `Wait ${sec}s`;
      if (sec <= 0) {
        clearInterval(interval);
        ready = true;
        document.getElementById('watchAdBtn').disabled = false;
        document.getElementById('timer').textContent = '‚úÖ Ready';
      }
    }, 1000);
  }

  function submitRedeem() {
    const pts = parseInt(document.getElementById('redeemPoints').value);
    const number = document.getElementById('redeemNumber').value;
    const method = document.getElementById('redeemMethod').value;
    const tgUser = localStorage.getItem('tgUser') || '';

    if (![500, 1000].includes(pts) || points < pts || !number || !tgUser) {
      alert("Invalid redeem request");
      return;
    }

    points -= pts;
    redeems++;
    localStorage.setItem('points', points);
    localStorage.setItem('redeems', redeems);
    updateUI();

    alert(`‚úÖ Request submitted:\n${pts} points\n${method} to ${number}`);
    // Here you can send redeem to Firebase or Telegram Bot
  }

  function saveUsername() {
    const user = document.getElementById('telegramUser').value.trim();
    if (user) {
      localStorage.setItem('tgUser', user);
      document.getElementById('savedUser').textContent = 'Username: ' + user;
    }
  }

  function showTab(tabId) {
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
  }
</script></body>
</html>
